# Session

## 특징

- Session은 툭수한 ID 값으로 구성되어 있습니다.
- Session은 서버에서 생성되며 클라이언트에서 쿠키를 통해 저장됩니다.
- 클라이언트에서 요청을 보낼 때 Session ID를 같이 보내면 현재 요청을 보내는 사용자가 누구인지 서버에서 알 수 있습니다.
  - 요청 할 때 마다 매번 아이디와 비밀번호를 물어볼 필요는 없음

<br />

## 단점

- Session ID는 DB에 저장되기 때문에 요청이 있을 때 마다 매번 DB를 확인해야 합니다.
- 서버에서 데이터가 저장되기 때문에 클라이언트에게 사용자 정보가 노출 될 위험이 있습니다.
- DB에 Session을 저장해야 하기 때문에 Horizontal Scaling이 어렵습니다.

> `Horizontal Scaling` ->  수평 확장

<br />

<br />

# Token

## 특징

- Token은 Header, Payload, Signature로 구성되어 있으며 Base 64로 인코딩 되어 있음
- Token은 서버에서 생성되며 클라이언트에서 저장함
- 클라이언트에서 요청을 보낼 때 Token ID를 같이 보내면 현재 요청을 보내는 사용자가 누구인지 서버에서 알 수 있음
  - 요청마다 매번 아이디, 비밀번호를 물어볼 필요 없음

<br />

## 단점

- Token은 DB에 저장되지 않고 Signature 값을 이용해 검증할 수 있음, 따라서 검증할 때 마다 DB를 매번 확인할 필요 없음
- 정보가 모두 토큰에 담겨있고 클라이언트에서 토큰을 저정하기 때문에 정보 유출의 위험이 있음
- DB가 필요없기 때문에 Horizontal Scaling이 쉬움

<br />

## Session Vs Token 비교

| 비교요소                                                     | Session   | Token                                                       |
| ------------------------------------------------------------ | --------- | ----------------------------------------------------------- |
| 유저의 정보를 어디에 저장하나?                               | 서버      | 클라이언트                                                  |
| 클라이언트에서 서버로 보내는 정보는?                         | 쿠키      | 토큰                                                        |
| 유저 정보를 가져올 때 DB를 확인해야 하는가?                  | 확인 필요 | 토큰의 payload에 들어있는 정보만 필요한 경우 확인 안해도 됨 |
| 클라이언트에서 인증 정보를 읽을 수 있는가?                   | 불가능    | 가능                                                        |
| Horizontal Scaling(수평확장)이 쉬운가?<br />-> 확장성에 용이한가? | 어려움    | 쉬움                                                        |

